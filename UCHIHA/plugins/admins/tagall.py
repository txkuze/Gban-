from UCHIHA import app 
import asyncio
import random
from pyrogram import Client, filters
from pyrogram.enums import ChatType, ChatMemberStatus
from pyrogram.errors import UserNotParticipant
from pyrogram.types import ChatPermissions

spam_chats = []

EMOJI = [ "ЁЯжЛЁЯжЛЁЯжЛЁЯжЛЁЯжЛ",
          "ЁЯзЪЁЯМ╕ЁЯзЛЁЯНмЁЯлЦ",
          "ЁЯеАЁЯМ╖ЁЯМ╣ЁЯМ║ЁЯТР",
          "ЁЯМ╕ЁЯМ┐ЁЯТоЁЯМ▒ЁЯМ╡",
          "тЭдя╕ПЁЯТЪЁЯТЩЁЯТЬЁЯЦд",
          "ЁЯТУЁЯТХЁЯТЮЁЯТЧЁЯТЦ",
          "ЁЯМ╕ЁЯТРЁЯМ║ЁЯМ╣ЁЯжЛ",
          "ЁЯНФЁЯжкЁЯНЫЁЯН▓ЁЯеЧ",
          "ЁЯНОЁЯНУЁЯНТЁЯНСЁЯМ╢я╕П",
          "ЁЯзЛЁЯедЁЯзЛЁЯеЫЁЯН╖",
          "ЁЯНмЁЯНнЁЯзБЁЯОВЁЯНб",
          "ЁЯНиЁЯзЙЁЯН║тШХЁЯН╗",
          "ЁЯекЁЯезЁЯНжЁЯНеЁЯНЪ",
          "ЁЯлЦтШХЁЯН╣ЁЯН╖ЁЯеЫ",
          "тШХЁЯзГЁЯНйЁЯНжЁЯНЩ",
          "ЁЯНБЁЯМ╛ЁЯТоЁЯНВЁЯМ┐",
          "ЁЯМия╕ПЁЯМея╕ПтЫИя╕ПЁЯМйя╕ПЁЯМзя╕П",
          "ЁЯМ╖ЁЯП╡я╕ПЁЯМ╕ЁЯМ║ЁЯТР",
          "ЁЯТоЁЯМ╝ЁЯМ╗ЁЯНАЁЯНБ",
          "ЁЯзЯЁЯж╕ЁЯж╣ЁЯзЩЁЯС╕",
          "ЁЯзЕЁЯНаЁЯеХЁЯМ╜ЁЯеж",
          "ЁЯР╖ЁЯР╣ЁЯРнЁЯРиЁЯР╗тАНтЭДя╕П",
          "ЁЯжЛЁЯРЗЁЯРАЁЯРИЁЯРИтАНтмЫ",
          "ЁЯМ╝ЁЯМ│ЁЯМ▓ЁЯМ┤ЁЯМ╡",
          "ЁЯейЁЯНЛЁЯНРЁЯНИЁЯНЗ",
          "ЁЯН┤ЁЯН╜я╕ПЁЯФкЁЯН╢ЁЯеГ",
          "ЁЯХМЁЯП░ЁЯПйтЫйя╕ПЁЯПй",
          "ЁЯОЙЁЯОКЁЯОИЁЯОВЁЯОА",
          "ЁЯк┤ЁЯМ╡ЁЯМ┤ЁЯМ│ЁЯМ▓",
          "ЁЯОДЁЯОЛЁЯОНЁЯОСЁЯОО",
          "ЁЯжЕЁЯжЬЁЯХКя╕ПЁЯждЁЯжв",
          "ЁЯждЁЯжйЁЯжЪЁЯжГЁЯжЖ",
          "ЁЯРмЁЯжнЁЯжИЁЯРЛЁЯР│",
          "ЁЯРФЁЯРЯЁЯРаЁЯРбЁЯжР",
          "ЁЯжйЁЯжАЁЯжСЁЯРЩЁЯжк",
          "ЁЯРжЁЯжВЁЯХ╖я╕ПЁЯХ╕я╕ПЁЯРЪ",
          "ЁЯекЁЯН░ЁЯезЁЯНиЁЯНи",
          " ЁЯемЁЯНЙЁЯзБЁЯзЗ",
        ]

TAGMES = [
    " **рд╣рдЬрд╝рд╛рд░реЛрдВ рдЦрд╝реНрд╡рд╛рд╣рд┐рд╢реЗрдВ рдРрд╕реА рдХрд┐ рд╣рд░ рдЦрд╝реНрд╡рд╛рд╣рд┐рд╢ рдкреЗ рджрдо рдирд┐рдХрд▓реЗ тАФ рдмрд╣реБрдд рдирд┐рдХрд▓реЗ рдореЗрд░реЗ рдЕрд░рдорд╛рди рд▓реЗрдХрд┐рди рдлрд┐рд░ рднреА рдХрдо рдирд┐рдХрд▓реЗред** ",
    " **рджрд┐рд▓ рд╣реА рддреЛ рд╣реИ рди рд╕рдВрдЧ-рдУ-рдЦрд╝рд┐рд╢реНрдд, рджрд░реНрдж рд╕реЗ рднрд░ рди рдЖрдП рдХреНрдпреЛрдВред** ",
    " **рдЗрд╢реНрдХрд╝ рдиреЗ тАШрдЧрд╝рд╛рд▓рд┐рдмтАЩ рдирд┐рдХрдореНрдорд╛ рдХрд░ рджрд┐рдпрд╛, рд╡рд░рдирд╛ рд╣рдо рднреА рдЖрджрдореА рдереЗ рдХрд╛рдо рдХреЗред** ",
    " **рд╣рдордХреЛ рдорд╛рд▓реВрдо рд╣реИ рдЬрдиреНрдирдд рдХреА рд╣рдХрд╝реАрдХрд╝рдд рд▓реЗрдХрд┐рди, рджрд┐рд▓ рдХреЗ рдмрд╣рд▓рд╛рдиреЗ рдХреЛ тАШрдЧрд╝рд╛рд▓рд┐рдмтАЩ рдпреЗ рдЦрд╝рдпрд╛рд▓ рдЕрдЪреНрдЫрд╛ рд╣реИред** ",
    " **рд░рдЧреЛрдВ рдореЗрдВ рджреМрдбрд╝рддреЗ рдлрд┐рд░рдиреЗ рдХреЗ рд╣рдо рдирд╣реАрдВ рдХрд╝рд╛рдпрд▓, рдЬрдм рдЖрдБрдЦ рд╣реА рд╕реЗ рди рдЯрдкрдХрд╛ рддреЛ рдлрд┐рд░ рд▓рд╣реВ рдХреНрдпрд╛ рд╣реИред** ",
    " **рдХрд╝реИрдж-рдП-рд╣рдпрд╛рдд-рдУ-рдмрдВрдж-рдП-рдЧрд╝рдо рдЕрд╕реНрд▓ рдореЗрдВ рджреЛрдиреЛрдВ рдПрдХ рд╣реИрдВред** ",
    " **рдЗрд╢реНрдХрд╝ рдкрд░ рдЬрд╝реЛрд░ рдирд╣реАрдВ рд╣реИ рдпреЗ рд╡реЛ рдЖрддрд┐рд╢ тАШрдЧрд╝рд╛рд▓рд┐рдмтАЩ, рдХрд┐ рд▓рдЧрд╛рдП рди рд▓рдЧреЗ рдФрд░ рдмреБрдЭрд╛рдП рди рдмрдиреЗред** ",
    " **рдмрд╕ рдХрд┐ рджреБрд╢реНрд╡рд╛рд░ рд╣реИ рд╣рд░ рдХрд╛рдо рдХрд╛ рдЖрд╕рд╛рдБ рд╣реЛрдирд╛, рдЖрджрдореА рдХреЛ рднреА рдордпрд╕реНрд╕рд░ рдирд╣реАрдВ рдЗрдВрд╕рд╛рдБ рд╣реЛрдирд╛ред** ",
    " **рдХреЛрдИ рдЙрдореНрдореАрдж рдмрд░ рдирд╣реАрдВ рдЖрддреА, рдХреЛрдИ рд╕реВрд░рдд рдирдЬрд╝рд░ рдирд╣реАрдВ рдЖрддреАред** ",
    " **рджрд┐рд▓-рдП-рдирд╛рджрд╛рдБ рддреБрдЭреЗ рд╣реБрдЖ рдХреНрдпрд╛ рд╣реИ, рдЖрдЦрд╝рд┐рд░ рдЗрд╕ рджрд░реНрдж рдХреА рджрд╡рд╛ рдХреНрдпрд╛ рд╣реИред** ",
    " **рд╣реБрдИ рдореБрджреНрджрдд рдХрд┐ тАШрдЧрд╝рд╛рд▓рд┐рдмтАЩ рдорд░ рдЧрдпрд╛, рдкрд░ рдпрд╛рдж рдЖрддрд╛ рд╣реИ рд╣рд░ рдПрдХ рдмрд╛рдд рдкреЗред** ",
    " **рдЖрд╣ рдХреЛ рдЪрд╛рд╣рд┐рдП рдЗрдХ рдЙрдореНрд░ рдЕрд╕рд░ рд╣реЛрддреЗ рддрдХ, рдХреМрди рдЬреАрддрд╛ рд╣реИ рддреЗрд░реА рдЬрд╝реБрд▓реНрдлрд╝ рдХреЗ рд╕рд░ рд╣реЛрддреЗ рддрдХред** ",
    " **рди рдерд╛ рдХреБрдЫ рддреЛ рдЦрд╝реБрджрд╛ рдерд╛, рдХреБрдЫ рди рд╣реЛрддрд╛ рддреЛ рдЦрд╝реБрджрд╛ рд╣реЛрддрд╛ред** ",
    " **рджрд┐рд▓ рд╕реЗ рддреЗрд░реА рдирд┐рдЧрд╛рд╣ рдЬрд┐рдЧрд░ рддрдХ рдЙрддрд░ рдЧрдИред** ",
    " **рдЗрд╢реНрдХрд╝ рдиреЗ рдЧрд╝рд╛рд▓рд┐рдм рдирд┐рдХрдореНрдорд╛ рдХрд░ рджрд┐рдпрд╛ред** ",
    " **рд╣рдо рд╣реИрдВ рдореБрд╢реНрддрд╛рдХрд╝ рдФрд░ рд╡реЛ рдмреЗрдЬрд╝рд╛рд░, рдпрд╛ рдЗрд▓рд╛рд╣реА рдпреЗ рдорд╛рдЬрд░рд╛ рдХреНрдпрд╛ рд╣реИред** ",
    " **рдЗрдмреНрддрд┐рджрд╛-рдП-рдЗрд╢реНрдХрд╝ рд╣реИ рд░реЛрддрд╛ рд╣реИ рдХреНрдпрд╛, рдЖрдЧреЗ-рдЖрдЧреЗ рджреЗрдЦрд┐рдП рд╣реЛрддрд╛ рд╣реИ рдХреНрдпрд╛ред** ",
    " **рджрд┐рд▓-рдП-рдирд╛рджрд╛рдБ рддреБрдЭреЗ рд╣реБрдЖ рдХреНрдпрд╛ рд╣реИред** ",
    " **рдХрд╝рд░реНрдЬрд╝ рдХреА рдкреАрддреЗ рдереЗ рдореИрдВ рдФрд░ рд╕рдордЭрддреЗ рдереЗ рдХрд┐ рд╣рд╛рдБ, рд░рдВрдЧ рд▓рд╛рдПрдЧреА рд╣рдорд╛рд░реА рдлрд╝рд╛рдХрд╝рд╛рдорд╕реНрддреА рдПрдХ рджрд┐рдиред** ",
    " **рдЬрд╝рд┐рдВрджрдЧреА рдЕрдкрдиреА рдЬрдм рдЗрд╕ рд╢рдХреНрд▓ рд╕реЗ рдЧреБрдЬрд╝рд░реА тАШрдЧрд╝рд╛рд▓рд┐рдмтАЩ, рд╣рдо рднреА рдХреНрдпрд╛ рдпрд╛рдж рдХрд░реЗрдВрдЧреЗ рдХрд┐ рдЦрд╝реБрджрд╛ рд░рдЦрддреЗ рдереЗред** ",
    " **рд╣рд░ рдПрдХ рдмрд╛рдд рдкреЗ рдХрд╣рддреЗ рд╣реЛ рддреБрдо рдХрд┐ рддреВ рдХреНрдпрд╛ рд╣реИред** ",
    " **рджрд┐рд▓-рдП-рдирд╛рджрд╛рдБ рддреБрдЭреЗ рд╣реБрдЖ рдХреНрдпрд╛ рд╣реИ, рдЖрдЦрд╝рд┐рд░ рдЗрд╕ рджрд░реНрдж рдХреА рджрд╡рд╛ рдХреНрдпрд╛ рд╣реИред** ",
    " **рд╣рдордХреЛ рдЙрди рд╕реЗ рд╡рдлрд╝рд╛ рдХреА рд╣реИ рдЙрдореНрдореАрдж, рдЬреЛ рдирд╣реАрдВ рдЬрд╛рдирддреЗ рд╡рдлрд╝рд╛ рдХреНрдпрд╛ рд╣реИред** ",
    " **рджрд┐рд▓-рдП-рдирд╛рджрд╛рдБ рддреБрдЭреЗ рд╣реБрдЖ рдХреНрдпрд╛ рд╣реИред** ",
    " **рдХрд╝реИрдж-рдП-рд╣рдпрд╛рдд-рдУ-рдмрдВрдж-рдП-рдЧрд╝рдо рджреЛрдиреЛрдВ рдПрдХ рд╣реИрдВред** ",
    " **рд╣рдЬрд╝рд╛рд░реЛрдВ рдЦрд╝реНрд╡рд╛рд╣рд┐рд╢реЗрдВ рдРрд╕реА рдХрд┐ рд╣рд░ рдЦрд╝реНрд╡рд╛рд╣рд┐рд╢ рдкреЗ рджрдо рдирд┐рдХрд▓реЗред** ",
    " **рдЗрд╢реНрдХрд╝ рдиреЗ тАШрдЧрд╝рд╛рд▓рд┐рдмтАЩ рдирд┐рдХрдореНрдорд╛ рдХрд░ рджрд┐рдпрд╛ред** ",
 ]

@app.on_message(filters.command(["tagall", "spam", "tagmember", "utag", "stag", "hftag", "bstag", "eftag", "tag", "etag", "utag", "atag"], prefixes=["/", "@", "#"]))
async def mentionall(client, message):
    chat_id = message.chat.id
    if message.chat.type == ChatType.PRIVATE:
        return await message.reply("ЁЭРУЁЭРбЁЭРвЁЭРм ЁЭРВЁЭРиЁЭРжЁЭРжЁЭРЪЁЭРзЁЭРЭ ЁЭРОЁЭРзЁЭРеЁЭР▓ ЁЭРЕЁЭРиЁЭРл ЁЭРЖЁЭРлЁЭРиЁЭРоЁЭРйЁЭРм.")

    is_admin = False
    try:
        participant = await client.get_chat_member(chat_id, message.from_user.id)
    except UserNotParticipant:
        is_admin = False
    else:
        if participant.status in (
            ChatMemberStatus.ADMINISTRATOR,
            ChatMemberStatus.OWNER
        ):
            is_admin = True
    if not is_admin:
        return await message.reply("ЁЭРШЁЭРиЁЭРо ЁЭРАЁЭРлЁЭРЮ ЁЭРНЁЭРиЁЭРн ЁЭРАЁЭРЭЁЭРжЁЭРвЁЭРз ЁЭРБЁЭРЪЁЭРЫЁЭР▓, ЁЭРОЁЭРзЁЭРеЁЭР▓ ЁЭРАЁЭРЭЁЭРжЁЭРвЁЭРзЁЭРм ЁЭРВЁЭРЪЁЭРз . ")

    if message.reply_to_message and message.text:
        return await message.reply("/tagall  ЁЭРУЁЭР▓ЁЭРйЁЭРЮ ЁЭРЛЁЭРвЁЭРдЁЭРЮ ЁЭРУЁЭРбЁЭРвЁЭРм / ЁЭРСЁЭРЮЁЭРйЁЭРеЁЭР▓ ЁЭРАЁЭРзЁЭР▓ ЁЭРМЁЭРЮЁЭРмЁЭРмЁЭРЪЁЭРаЁЭРЮ ЁЭРНЁЭРЮЁЭР▒ЁЭРн ЁЭРУЁЭРвЁЭРжЁЭРЮ ")
    elif message.text:
        mode = "text_on_cmd"
        msg = message.text
    elif message.reply_to_message:
        mode = "text_on_reply"
        msg = message.reply_to_message
        if not msg:
            return await message.reply("/tagall  ЁЭРУЁЭР▓ЁЭРйЁЭРЮ ЁЭРЛЁЭРвЁЭРдЁЭРЮ ЁЭРУЁЭРбЁЭРвЁЭРм / ЁЭРСЁЭРЮЁЭРйЁЭРеЁЭР▓ ЁЭРАЁЭРзЁЭР▓ ЁЭРМЁЭРЮЁЭРмЁЭРмЁЭРЪЁЭРаЁЭРЮ ЁЭРНЁЭРЮЁЭР▒ЁЭРн ЁЭРУЁЭРвЁЭРжЁЭРЮ ...")
    else:
        return await message.reply("/tagall  ЁЭРУЁЭР▓ЁЭРйЁЭРЮ ЁЭРЛЁЭРвЁЭРдЁЭРЮ ЁЭРУЁЭРбЁЭРвЁЭРм / ЁЭРСЁЭРЮЁЭРйЁЭРеЁЭР▓ ЁЭРАЁЭРзЁЭР▓ ЁЭРМЁЭРЮЁЭРмЁЭРмЁЭРЪЁЭРаЁЭРЮ ЁЭРНЁЭРЮЁЭР▒ЁЭРн ЁЭРУЁЭРвЁЭРжЁЭРЮ ..")
    if chat_id in spam_chats:
        return await message.reply("ЁЭРПЁЭРеЁЭРЮЁЭРЪЁЭРмЁЭРЮ ЁЭРАЁЭРн ЁЭРЕЁЭРвЁЭРлЁЭРмЁЭРн ЁЭРТЁЭРнЁЭРиЁЭРй ЁЭРСЁЭРоЁЭРзЁЭРзЁЭРвЁЭРзЁЭРа ЁЭРПЁЭРлЁЭРиЁЭРЬЁЭРЮЁЭРмЁЭРм ...")
    spam_chats.append(chat_id)
    usrnum = 0
    usrtxt = ""
    async for usr in client.get_chat_members(chat_id):
        if not chat_id in spam_chats:
            break
        if usr.user.is_bot:
            continue
        usrnum += 1
        usrtxt += f"[{usr.user.first_name}](tg://user?id={usr.user.id}) "

        if usrnum == 1:
            if mode == "text_on_cmd":
                txt = f"{usrtxt} {random.choice(TAGMES)}"
                await client.send_message(chat_id, txt)
            elif mode == "text_on_reply":
                await msg.reply(f"[{random.choice(EMOJI)}](tg://user?id={usr.user.id})")
            await asyncio.sleep(4)
            usrnum = 0
            usrtxt = ""
    try:
        spam_chats.remove(chat_id)
    except:
        pass

@app.on_message(filters.command(["tagoff", "tagstop"]))
async def cancel_spam(client, message):
    if not message.chat.id in spam_chats:
        return await message.reply("ЁЭРВЁЭРоЁЭРлЁЭРлЁЭРЮЁЭРзЁЭРнЁЭРеЁЭР▓ ЁЭРИ'ЁЭРж ЁЭРНЁЭРиЁЭРн ..")
    is_admin = False
    try:
        participant = await client.get_chat_member(message.chat.id, message.from_user.id)
    except UserNotParticipant:
        is_admin = False
    else:
        if participant.status in (
            ChatMemberStatus.ADMINISTRATOR,
            ChatMemberStatus.OWNER
        ):
            is_admin = True
    if not is_admin:
        return await message.reply("ЁЭРШЁЭРиЁЭРо ЁЭРАЁЭРлЁЭРЮ ЁЭРНЁЭРиЁЭРн ЁЭРАЁЭРЭЁЭРжЁЭРвЁЭРз ЁЭРБЁЭРЪЁЭРЫЁЭР▓, ЁЭРОЁЭРзЁЭРеЁЭР▓ ЁЭРАЁЭРЭЁЭРжЁЭРвЁЭРзЁЭРм ЁЭРВЁЭРЪЁЭРз ЁЭРУЁЭРЪЁЭРа ЁЭРМЁЭРЮЁЭРжЁЭРЫЁЭРЮЁЭРлЁЭРм.")
    else:
        try:
            spam_chats.remove(message.chat.id)
        except:
            pass
        return await message.reply("тЩж ЁЭРИЁЭРНЁЭРЕЁЭРИЁЭРНЁЭРИЁЭРУЁЭРШ sс┤Ыс┤Пс┤Шс┤Шс┤Зс┤Е с┤Ыс┤А╔в╔к╔┤╔в...тЩж")
